import { JwtService } from "@nestjs/jwt";
import { Share, User } from "@prisma/client";
import { ClamScanService } from "src/clamscan/clamscan.service";
import { ConfigService } from "src/config/config.service";
import { EmailService } from "src/email/email.service";
import { FileService } from "src/file/file.service";
import { PrismaService } from "src/prisma/prisma.service";
import { ReverseShareService } from "src/reverseShare/reverseShare.service";
import { CreateShareDTO } from "./dto/createShare.dto";
export declare class ShareService {
    private prisma;
    private configService;
    private fileService;
    private emailService;
    private config;
    private jwtService;
    private reverseShareService;
    private clamScanService;
    constructor(prisma: PrismaService, configService: ConfigService, fileService: FileService, emailService: EmailService, config: ConfigService, jwtService: JwtService, reverseShareService: ReverseShareService, clamScanService: ClamScanService);
    create(share: CreateShareDTO, user?: User, reverseShareToken?: string): Promise<{
        name: string | null;
        id: string;
        createdAt: Date;
        expiration: Date;
        description: string | null;
        uploadLocked: boolean;
        isZipReady: boolean;
        views: number;
        removedReason: string | null;
        creatorId: string | null;
        reverseShareId: string | null;
        storageProvider: string;
    }>;
    createZip(shareId: string): Promise<void>;
    complete(id: string, reverseShareToken?: string): Promise<{
        notifyReverseShareCreator: boolean;
        name: string | null;
        id: string;
        createdAt: Date;
        expiration: Date;
        description: string | null;
        uploadLocked: boolean;
        isZipReady: boolean;
        views: number;
        removedReason: string | null;
        creatorId: string | null;
        reverseShareId: string | null;
        storageProvider: string;
    }>;
    revertComplete(id: string): Promise<{
        name: string | null;
        id: string;
        createdAt: Date;
        expiration: Date;
        description: string | null;
        uploadLocked: boolean;
        isZipReady: boolean;
        views: number;
        removedReason: string | null;
        creatorId: string | null;
        reverseShareId: string | null;
        storageProvider: string;
    }>;
    getShares(): Promise<{
        size: number;
        files: {
            name: string;
            id: string;
            createdAt: Date;
            size: string;
            shareId: string;
        }[];
        creator: {
            updatedAt: Date;
            email: string;
            username: string;
            password: string | null;
            id: string;
            createdAt: Date;
            isAdmin: boolean;
            ldapDN: string | null;
            totpEnabled: boolean;
            totpVerified: boolean;
            totpSecret: string | null;
        };
        name: string | null;
        id: string;
        createdAt: Date;
        expiration: Date;
        description: string | null;
        uploadLocked: boolean;
        isZipReady: boolean;
        views: number;
        removedReason: string | null;
        creatorId: string | null;
        reverseShareId: string | null;
        storageProvider: string;
    }[]>;
    getSharesByUser(userId: string): Promise<{
        size: number;
        recipients: string[];
        security: {
            maxViews: number;
            passwordProtected: boolean;
        };
        files: {
            name: string;
            id: string;
            createdAt: Date;
            size: string;
            shareId: string;
        }[];
        name: string | null;
        id: string;
        createdAt: Date;
        expiration: Date;
        description: string | null;
        uploadLocked: boolean;
        isZipReady: boolean;
        views: number;
        removedReason: string | null;
        creatorId: string | null;
        reverseShareId: string | null;
        storageProvider: string;
    }[]>;
    get(id: string): Promise<any>;
    getMetaData(id: string): Promise<{
        name: string | null;
        id: string;
        createdAt: Date;
        expiration: Date;
        description: string | null;
        uploadLocked: boolean;
        isZipReady: boolean;
        views: number;
        removedReason: string | null;
        creatorId: string | null;
        reverseShareId: string | null;
        storageProvider: string;
    }>;
    remove(shareId: string, isDeleterAdmin?: boolean): Promise<void>;
    isShareCompleted(id: string): Promise<boolean>;
    isShareIdAvailable(id: string): Promise<{
        isAvailable: boolean;
    }>;
    increaseViewCount(share: Share): Promise<void>;
    getShareToken(shareId: string, password: string): Promise<string>;
    generateShareToken(shareId: string): Promise<string>;
    verifyShareToken(shareId: string, token: string): Promise<boolean>;
}
